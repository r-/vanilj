!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@vanilj/core")):"function"==typeof define&&define.amd?define(["exports","@vanilj/core"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).VaniljPluginDevtools={},e.VaniljCore)}(this,function(e,n){"use strict";const o=[];let t=-1;const l=new Set;let i={logOnly:null};function a(e){for(const[n,o]of Object.entries(e)){const e=s(n);e&&(e.__skipDevLog=!0,e.__skipDevSnapshot=!0,e.value=o,delete e.__skipDevLog,delete e.__skipDevSnapshot)}}function s(e){return Object.values(window.__vaniljSignals??{}).find(n=>n.__devName===e)}"undefined"!=typeof window&&window.VaniljCore&&console.log("Vanilj DevTools plugin loaded"),e.registerSignal=function(e,n){window.__vaniljSignals=window.__vaniljSignals||{},window.__vaniljSignals[e]=n,n.__devName=e},e.useVaniljDevtools=function({maxSnapshots:e=100}={}){return console.log("%cðŸ› ï¸ Vanilj DevTools active","color: #0af"),n.useVaniljPlugin((n,a)=>{if("signal:create"===n){const n=a.signal;a.name&&(n.__devName=a.name);const s=Object.getOwnPropertyDescriptor(n,"value");Object.defineProperty(n,"value",{get:s.get,set(a){const c=s.get.call(n);s.set.call(n,a),!n.__skipDevLog&&function(e){return!i.logOnly||i.logOnly.has(e.__devName)}(n)&&function(e,n,o){console.log("ðŸ“¦ %cSignal update","color: #09f",{name:e.__devName??"anonymous",old:n,new:o})}(n,c,a),n.__skipDevSnapshot||function(){const n=function(){const e={};for(const n of Object.values(window.__vaniljSignals??{})){e[n.__devName??n.toString()]=n.value}return structuredClone(e)}();t<o.length-1&&o.splice(t+1);o.push(n),o.length>e&&o.shift();t=o.length-1}(),l.forEach(e=>e(n,c,a))},configurable:!0})}}),{config(e){e.logOnly&&(i.logOnly=new Set(e.logOnly))},watch:(e,n)=>(l.add(n),()=>l.delete(n)),getHistory:()=>o.map((e,n)=>({index:n,snapshot:e})),undo(){t>0&&(t--,a(o[t]))},redo(){t<o.length-1&&(t++,a(o[t]))}}},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=vanilj-plugin-devtools.min.umd.js.map
