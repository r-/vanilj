!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@vanilj/core")):"function"==typeof define&&define.amd?define(["exports","@vanilj/core"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).VaniljPluginReactiveObject={},e.VaniljCore)}(this,function(e,t){"use strict";const n=Symbol("__vanilj_states__"),o=Symbol("__vanilj_bindings__"),i=Symbol("__vanilj_keysgen__"),r=Symbol("__vanilj_keytochild__"),l=Symbol("__vanilj_noreactive__"),c=Object.getPrototypeOf(t.signal()),f=e=>e&&"object"==typeof e&&!Array.isArray(e)&&!(e instanceof Function)&&!e[l];function u(e){return(null==e?void 0:e.__isComputed)||(null==e?void 0:e.subscribe)?e:"function"==typeof e?t.computed(e):t.signal(f(e)?a(e):e)}const s={get(e,t,o){if(t===n)return e;if(t===Symbol.toStringTag)return"Reactive";if(t in e){const n=e[t];if(Object.getPrototypeOf(n)===c)return Array.isArray(e)&&"length"===t&&e[i].value,n.value}return Reflect.get(e,t,o)},set:(e,t,n,o)=>t in e&&Object.getPrototypeOf(e[t])===c?(e[t].value=f(n)?a(n):n,!0):(e[t]=u(n),e[i].value++,!0),deleteProperty:(e,t)=>(delete e[t],e[i].value++,!0),ownKeys:e=>(e[i].value,Reflect.ownKeys(e).filter(e=>![o,i].includes(e)))};function a(e){return!f(e)||e[n]?e:new Proxy(function(e){const n=Array.isArray(e)?[]:{};for(const[t,o]of Object.entries(e))n[t]=u(o);return n[o]=[],n[i]=t.signal(1),n}(e),s)}function y(e){return(null==e?void 0:e[n])||{}}"undefined"!=typeof window&&window.VaniljCore&&console.log("Vanilj Reactive Object plugin loaded"),e.compact=function e(t){if(Array.isArray(t))return t.filter(Boolean).map(e);if(!f(t))return t;const n={};for(const[o,i]of Object.entries(t))null!=i&&(n[o]=e(i));return n},e.list=function(e,t,n){const o="function"==typeof e?e():e;o[r]={};const i=y(t);for(const[l,f]of Object.entries(i)){if(Object.getPrototypeOf(f)!==c)continue;const e=n(t[l],()=>delete t[l],l);o.appendChild(e),o[r][l]=e}return o},e.noreactive=function(e){return e[l]=!0,e},e.raw=function(e){if(!(null==e?void 0:e[n]))return e;const t={};for(const[o,i]of Object.entries(e[n]))Object.getPrototypeOf(i)===c&&(t[o]=i.value);return t},e.reactive=a,e.replace=function(e,t){const n=Object.keys({...e,...t});for(const o of n)o in t?e[o]=t[o]:delete e[o];return e},e.stateFields=y,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=vanilj-plugin-reactive-object.min.umd.js.map
